var TransitionableReactRouter=function(t,e){"use strict";var n="default"in e?e.default:e;function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(n,!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,u=void 0;try{for(var c,a=t[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,u=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw u}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var f=e.createContext();var l="undefined"==typeof window,p=["entering","entered","exiting","exited"],s=[1,1,3,3];function y(t,e){var n=!0,u=!1,i=void 0;try{for(var f,l=function(){var t=a(f.value,3),n=t[0],r=t[1],u=t[2];n.lastIndex=0;var i=n.exec(e);return i?{v:{component:u,query:r.reduce(function(t,e,n){return e?c({},t,o({},e,i[n+1]||"/")):t},{})}}:"continue"},p=t[Symbol.iterator]();!(n=(f=p.next()).done);n=!0){var s=l();switch(s){case"continue":continue;default:if("object"===r(s))return s.v}}}catch(t){u=!0,i=t}finally{try{n||null==p.return||p.return()}finally{if(u)throw i}}return{component:null,attributes:null}}function v(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace("//","/")}return t.Router=function(t){var r=t.children,o=a(e.useState({currentRoute:window.location.pathname,previousRoute:""}),2),u=o[0],i=o[1];return e.useEffect(function(){function t(){i({currentRoute:"/".concat(window.location.pathname).replace("//","/"),previousRoute:u.currentRoute})}return window.addEventListener("popstate",t),function(){window.removeEventListener("popstate",t)}},[]),n.createElement(f.Provider,{value:c({setRoute:function(t){window.history.pushState({},null,t),i({currentRoute:window.location.pathname,previousRoute:u.currentRoute})}},u)},r)},t.RouterContext=f,t.TransitionableReactRoute=function t(r){var o=r.path,u=r.timeout,m=void 0===u?1e3:u,h=r.animateOnMount,d=r.children,b=Date.now(),w=e.useRef([]),g=e.useRef([]),R=e.useContext(f).currentRoute,O="".concat(R,"_").concat(b),E=a(e.useState(l?[{state:h?0:1,key:O,timestamp:b,currentRoute:R}]:[]),2),j=E[0],S=E[1];return w.current.length||n.Children.forEach(d,function(e){var r=e.props,u=r.path,i=r.defaultpath,f=e.type===t,l=c({},e.props,{fullPath:i?"defaultpath":v("".concat(o||"","/").concat(u)),timeout:m});f&&(l.animateOnMount=h);var p=n.cloneElement(e,l);i?w.current.push([/.*/gi,[!1],p]):w.current.push(function(t){var e=a(t,3),n=e[0],r=e[1],o=e[2],u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=a(function(t){var e=t.split("/");return"/"===t?["^",[!1]]:e.filter(function(t){return!!t}).reduce(function(t,e,n){var r=t[1];return 0===e.indexOf(":")?(r.push(e.substring(1)),["".concat(t[0],"\\/?([^\\/]+)?"),r]):(r.push(!1),n>0?["".concat(t[0],"\\/(").concat(e,")"),r]:["".concat(t[0],"(").concat(e,")"),r])},["^\\/",[]])}(v(o?"".concat(o,"/").concat(r):r)),2),i=c[0],f=c[1],l=i;return u?l="".concat(i,"\\/.*"):"/"===r&&(l="".concat(i,"\\/")),[new RegExp("".concat(l,"$"),"ig"),f,n]}([p,u,o],f))}),e.useEffect(function(){return function(){g.current.forEach(clearTimeout),g.current=[]}},[]),e.useEffect(function(){S(function(e){var n=i(e),r=Date.now(),o=(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t[t.length-1]}(n)||{}).currentRoute,u=y(w.current,R),a=y(w.current,o),f=u.component&&u.component.type===t;return a.component&&a.component.type===t&&f||n.push({state:h?0:1,key:O,timestamp:r,currentRoute:R}),n.length>1&&(n[n.length-2]=c({},n[n.length-2],{now:r,state:2})),g.current.push(setTimeout(function(){S(function(t){var e=!1,n=Date.now(),r=i(t);for(var o in r){var u=s[r[o].state];n-r[o].timestamp>=m&&u!==r[o].state&&(e=!0,r[o]=c({},r[o],{state:u}))}return e?r.filter(function(t){return t.state<3}):t})},m)),n})},[R]),e.useMemo(function(){return j.map(function(t){var e=t.currentRoute,r=t.key,o=t.state,u=y(w.current,e);return u.component?n.createElement(u.component.type,c({key:r},u.component.props,{query:u.query,transitionstate:p[o]})):null})},[j])},t}({},React);