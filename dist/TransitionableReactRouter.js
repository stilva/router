var TransitionableReactRouter=function(t,e){"use strict";var n="default"in e?e.default:e;function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){r(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function c(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},u=Object.keys(t);for(r=0;r<u.length;r++)n=u[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(r=0;r<u.length;r++)n=u[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}const i=e.createContext();const a="undefined"==typeof window,s=["entering","entered","exiting","exited"],l=[1,1,3,3];function f(t,e){if(!e)return null;for(let[n]of t.current){n.lastIndex=0;const t=n.exec(e);if(t)return t}}function p(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace("//","/")}return t.Router=function(t){let{children:r}=t;const[o,c]=e.useState({currentRoute:window.location.pathname,previousRoute:""});return e.useEffect(()=>{function t(){c(t=>({currentRoute:"/".concat(window.location.pathname).replace("//","/"),previousRoute:t.currentRoute}))}return window.addEventListener("popstate",t),function(){window.removeEventListener("popstate",t)}},[]),n.createElement(i.Provider,{value:u({setRoute:t=>{window.history.pushState({},null,t),c(t=>({currentRoute:window.location.pathname,previousRoute:t.currentRoute}))}},o)},r)},t.RouterContext=i,t.TransitionableReactRoute=function t(r){let{path:o,timeout:h=1e3,animateOnMount:m,children:d}=r,g=c(r,["path","timeout","animateOnMount","children"]);const y=Date.now(),O=e.useRef([]),b=e.useRef([]),w=e.useContext(i),R=w.currentRoute,v="".concat(R,"_").concat(y),[j,E]=e.useState(a?[{state:m?0:1,key:v,timestamp:y,currentRoute:R}]:[]);return O.current.length||n.Children.forEach(d,e=>{const{path:r,defaultpath:c}=e.props,i=e.type===t,a=u({},e.props,{fullPath:c?"defaultpath":p("".concat(o||"","/").concat(r)),timeout:h});i&&(a.animateOnMount=m);const s=n.cloneElement(e,a);c?O.current.push([/.*/gi,[!1],s]):O.current.push(function(t){let[e,n,r]=t,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const u=p(r?"".concat(r,"/").concat(n):n),[c,i]=function(t){const e=t.split("/");return"/"===t?["^",[!1]]:e.filter(t=>!!t).reduce((t,e,n)=>{const r=t[1];return 0===e.indexOf(":")?(r.push(e.substring(1)),["".concat(t[0],"\\/?([^\\/]+)?"),r]):(r.push(!1),n>0?["".concat(t[0],"\\/(").concat(e,")"),r]:["".concat(t[0],"(").concat(e,")"),r])},["^\\/",[]])}(u);let a=c;return o?a="".concat(c,"\\/.*"):"/"===n&&(a="".concat(c,"\\/")),[new RegExp("".concat(a,"$"),"ig"),i,e]}([s,r,o],i))}),e.useEffect(()=>()=>{b.current.forEach(clearTimeout),b.current=[]},[]),e.useEffect(()=>{g.transitionstate!==s[2]&&E(t=>{const e=[...t],n=Date.now(),r=function(t,e,n){const r=f(n,t),o=f(n,e);return o&&r?r[r.length-1]===o[o.length-1]:null}((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t[t.length-1]}(e)||{}).currentRoute,w.currentRoute,O),o=[],c=e.length-1;return e.length>0&&e[c].state<2&&!r&&(o.push(c),e[c]=u({},e[c],{now:n,state:2})),r||(o.push(e.length),e.push({state:m?0:1,key:v,timestamp:n,currentRoute:R})),o.forEach(t=>{const n=setTimeout(()=>(function(t,e){t(t=>{let n=!1;const r=Date.now(),o=[...t];for(let t=0;t<o.length;t++){const c=l[o[t].state];r-o[t].timestamp>=e&&c!==o[t].state&&(n=!0,o[t]=u({},o[t],{state:c}))}return n?o.filter(t=>{let{state:e}=t;return e<3}):t})})(E,h),h);clearTimeout(e[t].timeoutRef),b.current.push(n),e[t].timeoutRef=n}),e})},[R]),e.useMemo(()=>j.map(t=>{let{currentRoute:e,key:r,state:o}=t;const c=function(t,e){t:for(let[n,r,o]of t){n.lastIndex=0;const t=n.exec(e);if(!t)continue;let u={};for(let e=0;e<r.length;e++)if("string"==typeof r[e]&&(u[r[e]]=t[e+1],!t[e+1]))continue t;return{component:o,query:u}}return{component:null,attributes:null}}(O.current,e);return c.component?n.createElement(c.component.type,u({key:r},c.component.props,{query:c.query,transitionstate:s[o]})):null}),[j])},t}({},React);