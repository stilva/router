var TransitionableReactRouter=function(t,e){"use strict";var n="default"in e?e.default:e;function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(n,!0).forEach(function(e){r(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,u=void 0;try{for(var c,a=t[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,u=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw u}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i=e.createContext();var f=["entering","entered","exiting","exited"];function l(t){switch(t){case 0:return 1;case 2:return 3;default:return t}}function s(t,e){var n=!0,r=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(n=(u=a.next()).done);n=!0){var i=c(u.value,3),f=i[0],l=(i[1],i[2]);if(f.lastIndex=0,f.exec(e))return l}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return{}}function p(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace("//","/")}return t.Router=function(t){var r=t.children,o=c(e.useState({currentRoute:window.location.pathname,previousRoute:""}),2),a=o[0],f=o[1];return e.useEffect(function(){function t(){f({currentRoute:"/".concat(window.location.pathname).replace("//","/"),previousRoute:a.currentRoute})}return window.addEventListener("popstate",t),function(){window.removeEventListener("popstate",t)}},[]),n.createElement(i.Provider,{value:u({setRoute:function(t){window.history.pushState({},null,t),f({currentRoute:window.location.pathname,previousRoute:a.currentRoute})}},a)},r)},t.RouterContext=i,t.TransitionableReactRoute=function t(r){var o=r.path,v=r.timeout,h=void 0===v?1e3:v,y=r.animateOnMount,d=r.children,w=(r.lvl,Date.now()),m=e.useRef([]),b=e.useRef([]),g=e.useContext(i).currentRoute,R="".concat(g,"_").concat(w),O=c(e.useState([]),2),E=O[0],j=O[1];return m.current.length||n.Children.forEach(d,function(e){var r=e.props.path,a=e.type===t,i=u({},e.props,{fullPath:p("".concat(o||"","/").concat(r)),timeout:h});a&&(i.animateOnMount=y);var f=n.cloneElement(e,i);m.current.push(function(t){var e=c(t,3),n=e[0],r=e[1],o=e[2],u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=c(p(o?"".concat(o,"/").concat(r):r).split("/").filter(function(t){return!!t}).reduce(function(t,e,n){var r=t[1];return 0===e.indexOf(":")?(r.push(e.substring(1)),["".concat(t[0],"\\/?([^\\/]+)?"),r]):(r.push(!1),n>0?["".concat(t[0],"\\/(").concat(e,")"),r]:["".concat(t[0],"(").concat(e,")"),r])},["^\\/",[]]),2),i=a[0],f=a[1],l=i;return u?l="".concat(i,".*"):"/"===r&&(l="".concat(i,"\\/")),[new RegExp("".concat(l,"$"),"ig"),f,n]}([f,r,o],a))}),e.useEffect(function(){return function(){b.current.forEach(clearTimeout),b.current=[]}},[]),e.useEffect(function(){j(function(e){var n=a(e),r=Date.now(),o=(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t[t.length-1]}(n)||{}).currentRoute,c=s(m.current,g).type===t;return s(m.current,o).type===t&&c||n.push({state:y?0:1,key:R,timestamp:r,currentRoute:g}),n.length>1&&(n[n.length-2]=u({},n[n.length-2],{now:r,state:2})),b.current.push(setTimeout(function(){j(function(t){var e=!1,n=Date.now(),r=a(t);for(var o in r){var c=l(r[o].state);n-r[o].timestamp>=h&&c!==r[o].state&&(e=!0,r[o]=u({},r[o],{state:c}))}return e?r.filter(function(t){return t.state<3}):t})},h)),n})},[g]),function(t,n){var r=c(e.useState([]),2),o=r[0],u=r[1];return e.useEffect(function(){u(function(e){return t(e)})},n),o}(function(){return E.map(function(t){var e=t.currentRoute,r=t.key,o=t.state,c=s(m.current,e);return c.type?n.createElement(c.type,u({key:r},c.props,{transitionState:f[o]})):null})},[E])},t}({},React);