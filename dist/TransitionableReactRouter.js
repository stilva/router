var TransitionableReactRouter=function(t,e){"use strict";var n="default"in e?e.default:e;function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){r(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function a(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},u=Object.keys(t);for(r=0;r<u.length;r++)n=u[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(r=0;r<u.length;r++)n=u[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,u=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,u=t}finally{try{r||null==i.return||i.return()}finally{if(o)throw u}}return n}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=f(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,u=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return u=t.done,t},e:function(t){a=!0,o=t},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw o}}}}var p=e.createContext();var y="undefined"==typeof window,v=["entering","entered","exiting","exited"],h=[1,1,3,3];function m(t,e){if(!e)return null;var n,r=s(t.current);try{for(r.s();!(n=r.n()).done;){var o=i(n.value,1)[0];o.lastIndex=0;var u=o.exec(e);if(u)return u}}catch(t){r.e(t)}finally{r.f()}}function d(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace("//","/")}return t.Router=function(t){var r=t.children,o=i(e.useState({currentRoute:window.location.pathname,previousRoute:""}),2),a=o[0],c=o[1];return e.useEffect(function(){function t(){c(function(t){return{currentRoute:"/".concat(window.location.pathname).replace("//","/"),previousRoute:t.currentRoute}})}return window.addEventListener("popstate",t),function(){window.removeEventListener("popstate",t)}},[]),n.createElement(p.Provider,{value:u({setRoute:function(t){window.history.pushState({},null,t),c(function(t){return{currentRoute:window.location.pathname,previousRoute:t.currentRoute}})}},a)},r)},t.RouterContext=p,t.TransitionableReactRoute=function t(r){var o=r.path,f=r.timeout,l=void 0===f?1e3:f,b=r.animateOnMount,g=r.children,w=a(r,["path","timeout","animateOnMount","children"]),O=Date.now(),R=e.useRef([]),j=e.useRef([]),S=e.useContext(p),E=S.currentRoute,x="".concat(E,"_").concat(O),P=i(e.useState(y?[{state:b?0:1,key:x,timestamp:O,currentRoute:E}]:[]),2),A=P[0],I=P[1];return R.current.length||n.Children.forEach(g,function(e){var r=e.props,a=r.path,c=r.defaultpath,f=e.type===t,s=u({},e.props,{fullPath:c?"defaultpath":d("".concat(o||"","/").concat(a)),timeout:l});f&&(s.animateOnMount=b);var p=n.cloneElement(e,s);c?R.current.push([/.*/gi,[!1],p]):R.current.push(function(t){var e=i(t,3),n=e[0],r=e[1],o=e[2],u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=i(function(t){var e=t.split("/");return"/"===t?["^",[!1]]:e.filter(function(t){return!!t}).reduce(function(t,e,n){var r=t[1];return 0===e.indexOf(":")?(r.push(e.substring(1)),["".concat(t[0],"\\/?([^\\/]+)?"),r]):(r.push(!1),n>0?["".concat(t[0],"\\/(").concat(e,")"),r]:["".concat(t[0],"(").concat(e,")"),r])},["^\\/",[]])}(d(o?"".concat(o,"/").concat(r):r)),2),c=a[0],f=a[1],l=c;return u?l="".concat(c,"\\/.*"):"/"===r&&(l="".concat(c,"\\/")),[new RegExp("".concat(l,"$"),"ig"),f,n]}([p,a,o],f))}),e.useEffect(function(){return function(){j.current.forEach(clearTimeout),j.current=[]}},[]),e.useEffect(function(){w.transitionstate!==v[2]&&I(function(t){var e=c(t),n=Date.now(),r=function(t,e,n){var r=m(n,t),o=m(n,e);return o&&r?r[r.length-1]===o[o.length-1]:null}((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t[t.length-1]}(e)||{}).currentRoute,S.currentRoute,R),o=[],a=e.length-1;return e.length>0&&e[a].state<2&&!r&&(o.push(a),e[a]=u({},e[a],{now:n,state:2})),r||(o.push(e.length),e.push({state:b?0:1,key:x,timestamp:n,currentRoute:E})),o.forEach(function(t){var n=setTimeout(function(){return function(t,e){t(function(t){for(var n=!1,r=Date.now(),o=c(t),a=0;a<o.length;a++){var i=h[o[a].state];r-o[a].timestamp>=e&&i!==o[a].state&&(n=!0,o[a]=u({},o[a],{state:i}))}return n?o.filter(function(t){var e=t.state;return e<3}):t})}(I,l)},l);clearTimeout(e[t].timeoutRef),j.current.push(n),e[t].timeoutRef=n}),e})},[E]),e.useMemo(function(){return A.map(function(t){var e=t.currentRoute,r=t.key,o=t.state,a=function(t,e){var n,r=s(t);try{t:for(r.s();!(n=r.n()).done;){var o=i(n.value,3),u=o[0],a=o[1],c=o[2];u.lastIndex=0;var f=u.exec(e);if(f){for(var l={},p=0;p<a.length;p++)if("string"==typeof a[p]&&(l[a[p]]=f[p+1],!f[p+1]))continue t;return{component:c,query:l}}}}catch(t){r.e(t)}finally{r.f()}return{component:null,attributes:null}}(R.current,e);return a.component?n.createElement(a.component.type,u({key:r},a.component.props,{query:a.query,transitionstate:v[o]})):null})},[A])},t}({},React);