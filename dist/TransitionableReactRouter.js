var TransitionableReactRouter=function(t,e){"use strict";var n="default"in e?e.default:e;function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){r(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function u(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},c=Object.keys(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}const a=e.createContext();const i="undefined"==typeof window,s=["entering","entered","exiting","exited"],l=[1,1,3,3];function p(t,e){if(!e)return null;for(let[n]of t.current){n.lastIndex=0;const t=n.exec(e);if(t)return t}}function f(t=""){return t.replace("//","/")}return t.Router=function({children:t}){const[r,o]=e.useState({currentRoute:window.location.pathname,previousRoute:""});return e.useEffect(()=>{function t(){o(t=>({currentRoute:"/".concat(window.location.pathname).replace("//","/"),previousRoute:t.currentRoute}))}return window.addEventListener("popstate",t),function(){window.removeEventListener("popstate",t)}},[]),n.createElement(a.Provider,{value:c({setRoute:t=>{window.history.pushState({},null,t),o(t=>({currentRoute:window.location.pathname,previousRoute:t.currentRoute}))}},r)},t)},t.RouterContext=a,t.TransitionableReactRoute=function t(r){let{path:o,timeout:m=1e3,animateOnMount:h,children:d}=r,y=u(r,["path","timeout","animateOnMount","children"]);const O=Date.now(),b=e.useRef([]),g=e.useRef(m),w=e.useContext(a),R=w.currentRoute,v="".concat(R,"_").concat(O),[j,E]=e.useState(i?[{state:h?0:1,key:v,timestamp:O,currentRoute:R}]:[]);return b.current.length||n.Children.forEach(d,e=>{const{path:r,defaultpath:u}=e.props,a=e.type===t,i=c({},e.props,{fullPath:u?"defaultpath":f("".concat(o||"","/").concat(r)),timeout:m});a&&(i.animateOnMount=h);const s=n.cloneElement(e,i);u?b.current.push([/.*/gi,[!1],s]):b.current.push(function([t,e,n],r=!1){const o=f(n?"".concat(n,"/").concat(e):e),[c,u]=function(t){const e=t.split("/");return"/"===t?["^",[!1]]:e.filter(t=>!!t).reduce((t,e,n)=>{const r=t[1];return 0===e.indexOf(":")?(r.push(e.substring(1)),["".concat(t[0],"\\/?([^\\/]+)?"),r]):(r.push(!1),n>0?["".concat(t[0],"\\/(").concat(e,")"),r]:["".concat(t[0],"(").concat(e,")"),r])},["^\\/",[]])}(o);let a=c;return r?a="".concat(c,"\\/.*"):"/"===e&&(a="".concat(c,"\\/")),[new RegExp("".concat(a,"$"),"ig"),u,t]}([s,r,o],a))}),e.useEffect(()=>{y.transitionstate!==s[2]&&E(t=>{const e=[...t],n=Date.now(),r=function(t,e,n){const r=p(n,t),o=p(n,e);return o&&r?r[r.length-1]===o[o.length-1]:null}((function(t=[]){return t[t.length-1]}(e)||{}).currentRoute,w.currentRoute,b),o=e.length-1;return e.length>0&&e[o].state<2&&!r&&(e[o]=c({},e[o],{timestamp:n,state:2})),r||e.push({state:h?0:1,key:v,timestamp:n,currentRoute:R}),e})},[R]),e.useEffect(()=>{let t,e=!1;const n=()=>{t=requestAnimationFrame(()=>{!e&&function(t,e){t(t=>{let n=!1;const r=Date.now(),o=[...t];for(let t=0;t<o.length;t++){const u=l[o[t].state];r-o[t].timestamp>=e&&u!==o[t].state&&(n=!0,o[t]=c({},o[t],{state:u}))}return n?o.filter(({state:t})=>t<3):t})}(E,g.current),n()})};return t=n(),()=>{e=!0,cancelAnimationFrame(t)}},[]),e.useEffect(()=>{m!==g.current&&(b.current=b.current.map(([t,e,r])=>[t,e,m!==r.props.timeout?n.cloneElement(r,{timeout:m}):r]),g.current=m)},[m]),e.useMemo(()=>j.map(({currentRoute:t,key:e,state:r})=>{const o=function(t,e){t:for(let[n,r,o]of t){n.lastIndex=0;const t=n.exec(e);if(!t)continue;let c={};for(let e=0;e<r.length;e++)if("string"==typeof r[e]&&(c[r[e]]=t[e+1],!t[e+1]))continue t;return{component:o,query:c}}return{component:null,attributes:null}}(b.current,t);return o.component?n.createElement(o.component.type,c({key:e},o.component.props,{query:o.query,transitionstate:s[r]})):null}),[j])},t}({},React);